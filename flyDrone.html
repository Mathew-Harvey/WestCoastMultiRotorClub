<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WCMRC - Drone Animation</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            overflow-x: hidden;
            height: 300vh; /* Create enough scrollable space */
        }

        /* Main container */
        .container {
            position: relative;
            width: 100%;
            height: 100vh;
        }

        /* Logo styling - this is the base logo without drone */
        .logo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            max-width: 80%;
            z-index: 1;
            opacity: 1;
        }

        /* Drone styling - this is just the drone element */
        .drone {
            position: fixed;
            top: 25%;
            right: 20%;
            width: 200px;
            max-width: 30%;
            z-index: 2;
            transition: transform 0.05s linear;
        }

        /* Combined logo and drone - will be hidden initially */
        .logo-with-drone {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            max-width: 80%;
            z-index: 3;
            opacity: 0; /* Start hidden */
        }

        /* Scroll instructions */
        .scroll-instructions {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: #5a6978;
            font-size: 1rem;
            animation: fadeInOut 2s infinite;
            z-index: 4;
            text-align: center;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Arrow down animation */
        .arrow-down {
            width: 20px;
            height: 20px;
            border-right: 3px solid #5a6978;
            border-bottom: 3px solid #5a6978;
            transform: rotate(45deg);
            margin: 10px auto;
            animation: arrowBounce 2s infinite;
        }

        @keyframes arrowBounce {
            0%, 100% { transform: rotate(45deg) translate(0, 0); }
            50% { transform: rotate(45deg) translate(5px, 5px); }
        }

        /* Content sections for scrolling */
        .content-section {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: transparent;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Logo only (image 1) -->
        <img src="./assets/wcmrcLogoNoDrone.png" alt="WCMRC Logo" class="logo" id="logo">
        
        <!-- Drone only (image 2) -->
        <img src="./assets/drone.png" alt="Drone" class="drone" id="drone">
        
        <!-- Combined logo with drone (image 3) - initially hidden but will be shown based on scroll position -->
        <img src="./assets/wcmrcLogo.png" alt="WCMRC Logo with Drone" class="logo-with-drone" id="logoWithDrone">

        <!-- Scroll instructions -->
        <div class="scroll-instructions" id="scrollInstructions">
            <p>Scroll down to see the drone fly away</p>
            <div class="arrow-down"></div>
        </div>
    </div>

    <!-- Additional content sections for scrolling -->
    <div class="content-section" id="section1"></div>
    <div class="content-section" id="section2"></div>

    <script>
        // Get references to DOM elements
        const logo = document.getElementById('logo');
        const drone = document.getElementById('drone');
        const logoWithDrone = document.getElementById('logoWithDrone');
        const scrollInstructions = document.getElementById('scrollInstructions');
        
        // Animation parameters
        const droneInitialPosition = {
            top: 25,    // percentage from top
            right: 20,  // percentage from right
            scale: 1,
            opacity: 1
        };
        
        // Function to handle scroll animation
        function handleScroll() {
            // Calculate scroll percentage
            const scrollPosition = window.scrollY;
            const maxScroll = document.body.scrollHeight - window.innerHeight;
            const scrollPercentage = Math.min(scrollPosition / maxScroll, 1);
            
            // Threshold for transition between states
            const transitionThreshold = 0.1;  // At 10% scroll, begin the transition
            
            if (scrollPercentage <= transitionThreshold) {
                // Initial state: show both separate logo and drone
                const progressRatio = scrollPercentage / transitionThreshold;
                
                // Fade in the combined image as we approach the threshold
                logoWithDrone.style.opacity = progressRatio;
                
                // Fade out individual elements as we approach threshold
                logo.style.opacity = 1 - progressRatio;
                drone.style.opacity = 1 - progressRatio;
            } else {
                // Beyond threshold: hide individual elements, show combined, then animate drone away
                logo.style.opacity = 0;
                drone.style.opacity = 0;
                logoWithDrone.style.opacity = 1;
                
                // Calculate how far into the main animation we are
                const mainProgress = (scrollPercentage - transitionThreshold) / (1 - transitionThreshold);
                
                // Calculate drone animation
                if (mainProgress > 0) {
                    // Move drone up and right, scale down, fade out
                    const flyAwayX = mainProgress * 100; // pixels to move right
                    const flyAwayY = -mainProgress * 150; // pixels to move up
                    const scaleDown = Math.max(1 - mainProgress * 0.8, 0.2); // shrink to 20% at most
                    const fadeOut = Math.max(1 - mainProgress * 1.5, 0); // fade out faster than movement
                    
                    // Apply transformations to drone
                    drone.style.transform = `translate(${flyAwayX}px, ${flyAwayY}px) scale(${scaleDown})`;
                    drone.style.opacity = fadeOut;
                    
                    // Make the drone visible again for the fly-away animation
                    if (mainProgress > 0 && mainProgress < 0.8) {
                        drone.style.opacity = fadeOut;
                        drone.style.zIndex = 4; // Ensure drone is above other elements
                    }
                }
            }
            
            // Hide scroll instructions once user starts scrolling
            if (scrollPosition > 10) {
                scrollInstructions.style.opacity = 0;
                setTimeout(() => {
                    scrollInstructions.style.display = 'none';
                }, 500);
            }
        }
        
        // Add scroll event listener
        window.addEventListener('scroll', handleScroll);
        
        // Initialize on page load
        window.addEventListener('load', () => {
            handleScroll();
            
            // Position the drone initially
            const droneRect = drone.getBoundingClientRect();
            const initialTop = window.innerHeight * (droneInitialPosition.top / 100);
            const initialRight = window.innerWidth * (droneInitialPosition.right / 100);
            
            // Set initial position
            drone.style.top = `${initialTop}px`;
            drone.style.right = `${initialRight}px`;
        });
    </script>
</body>
</html>